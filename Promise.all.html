<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise.all</title>
  </head>
  <body>
    <script>
      Promise.all([
        new Promise(resolve => setTimeout(() => resolve(1), 1000))
          .finally(() => console.log('Promise1执行'))
          .then(res1 => {
            console.log('res1 :>> ', res1);
            return new Promise((resolve, reject) => {
              return resolve(res1);
            });
          }), // 1
        new Promise(resolve => setTimeout(() => resolve(2), 1000))
          .finally(() => console.log('Promise2执行'))
          .then(res2 => {
            console.log('res2 :>> ', res2);
            return new Promise((resolve, reject) => {
              return resolve(res2);
            });
          }), // 2
        new Promise(resolve => setTimeout(() => resolve(3), 1000))
          .finally(() => console.log('Promise3执行'))
          .then(res3 => {
            console.log('res3 :>> ', res3);
            return new Promise((resolve, reject) => {
              // return reject(new Error('what the fuck'));
              return resolve(res3);
            });
          }) // 3
      ])
        .then(result => console.log('result :>> ', result))
        .catch(err => console.log('err :>> ', err)); // 1,2,3 当上面这些 promise 准备好时：每个 promise 都贡献了数组中的一个元素
    </script>
  </body>
</html>
