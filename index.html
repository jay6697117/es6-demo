<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //1.0 Async function
      // --------------------------------------------------------
      // function foo1() {
      //   return new Promise(resolve => {
      //     return resolve(Promise.resolve(1));
      //   });
      //   // return Promise.resolve(1);
      //   // return Promise.resolve(new Error('what the fuck'));
      // }
      // console.log('foo1() :>> ', foo1());

      // foo1()
      //   .then(res1 => {
      //     console.log('res1 :>> ', res1);
      //   })
      //   .catch(err1 => {
      //     console.log('err1 :>> ', err1);
      //   });
      // --------------------------------------------------------
      // async function foo2() {
      //   // return 1;
      //   // return new Error('what the fuck');
      //   return Promise.resolve(2);
      // }
      // console.log('foo2() :>> ', foo2());

      // foo2()
      //   .then(res2 => {
      //     console.log('res2 :>> ', res2);
      //   })
      //   .catch(err2 => {
      //     console.log('err2 :>> ', err2);
      //   });
      // --------------------------------------------------------
      //2.0 Await
      // async function run() {
      //   const res1 = await Promise.resolve('hello world 111');
      //   console.log('res1 000:>> ', res1);

      //   const res2 = await new Promise((resolve, reject) => {
      //     setTimeout(() => {
      //       return resolve('hello world 222');
      //     }, 2000);
      //   });
      //   console.log('res1 001:>> ', res1);
      //   console.log('res2 :>> ', res2);
      // }
      // run();

      async function run() {
        console.log('run');//同步
        const response = await fetch('https://api.github.com/users/jay6697117'); //异步
        console.log('response :>> ', response);
        const result = await response.json(); //异步
        console.log('result :>> ', result);

        const h1Dom = document.createElement('h1');
        h1Dom.innerHTML = result.bio;
        h1Dom.style.color = 'red';
        h1Dom.style.textAlign = 'center';
        h1Dom.style.height = '60px';
        h1Dom.style.lineHeight = '60px';
        h1Dom.style.backgroundColor = '#ccc';
        document.body.append(h1Dom);


        await new Promise(resolve => {
          setTimeout(() => {
            return resolve();
          }, 5000);
        });

        h1Dom.remove();
        return result;
      }
      const res = run();
      console.log('res :>> ', res);//同步

      res.then(res1=>{
        console.log('res1 :>> ', res1);
      })
    </script>
  </body>
</html>
